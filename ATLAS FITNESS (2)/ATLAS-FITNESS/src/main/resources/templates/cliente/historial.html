<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="base :: head('Mi Historial', ~{::style}, ~{::script})">
    <style>
        /* Estilos específicos para historial */
        .history-hero {
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.9)), 
                        url('https://images.unsplash.com/photo-1534367507877-0edd93bd013b?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            padding: 80px 0;
            border-radius: 0 0 15px 15px;
            margin-bottom: 40px;
        }
        
        .history-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card-history {
            background-color: #111;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid #333;
            transition: transform 0.3s;
        }
        
        .stat-card-history:hover {
            transform: translateY(-5px);
            border-color: var(--primary-yellow);
        }
        
        .stat-number-history {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-yellow);
            margin-bottom: 5px;
        }
        
        .stat-label-history {
            color: #999;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .history-tabs {
            border-bottom: 2px solid #333;
            margin-bottom: 30px;
            display: flex;
            overflow-x: auto;
        }
        
        .history-tab {
            background: none;
            border: none;
            color: #666;
            padding: 10px 20px;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .history-tab:hover {
            color: var(--primary-yellow);
        }
        
        .history-tab.active {
            color: var(--primary-yellow);
            border-bottom-color: var(--primary-yellow);
        }
        
        .history-table {
            background-color: #111;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #333;
        }
        
        .table-header {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            padding: 15px 20px;
            background-color: #000;
            color: var(--primary-yellow);
            font-weight: bold;
            border-bottom: 2px solid var(--primary-yellow);
        }
        
        .table-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            padding: 15px 20px;
            border-bottom: 1px solid #333;
            align-items: center;
        }
        
        .table-row:last-child {
            border-bottom: none;
        }
        
        .table-row:hover {
            background-color: #1a1a1a;
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-completed {
            background-color: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 1px solid #28a745;
        }
        
        .status-pending {
            background-color: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            border: 1px solid #ffc107;
        }
        
        .status-cancelled {
            background-color: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            border: 1px solid #dc3545;
        }
        
        .history-card {
            background-color: #111;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary-yellow);
            transition: transform 0.3s;
        }
        
        .history-card:hover {
            transform: translateX(5px);
        }
        
        .history-date {
            color: var(--primary-yellow);
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .history-date i {
            margin-right: 10px;
        }
        
        .history-items {
            margin-top: 15px;
        }
        
        .history-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: #000;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .history-item-image {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .history-item-details {
            flex: 1;
        }
        
        .history-item-price {
            color: var(--primary-yellow);
            font-weight: bold;
        }
        
        .filters-bar {
            background-color: #111;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid #333;
        }
        
        .date-range {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .date-input {
            background-color: #000;
            border: 1px solid #333;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            flex: 1;
        }
        
        .export-btn {
            background-color: var(--primary-yellow);
            color: var(--primary-black);
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .export-btn:hover {
            background-color: #ffed4e;
            transform: translateY(-2px);
        }
        
        .progress-history {
            height: 8px;
            background-color: #333;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .progress-fill-history {
            height: 100%;
            background-color: var(--primary-yellow);
            border-radius: 4px;
            transition: width 0.3s;
        }
        
        .empty-history {
            text-align: center;
            padding: 60px 20px;
            background-color: #111;
            border-radius: 15px;
            border: 2px dashed #333;
        }
        
        .empty-icon {
            font-size: 4rem;
            color: #666;
            margin-bottom: 20px;
        }
        
        .chart-container {
            background-color: #111;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid #333;
            height: 300px;
        }
        
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #333;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
        }
        
        .timeline-dot {
            position: absolute;
            left: -25px;
            top: 5px;
            width: 12px;
            height: 12px;
            background-color: var(--primary-yellow);
            border-radius: 50%;
            border: 2px solid #000;
        }
        
        .timeline-content {
            background-color: #000;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #333;
        }
        
        .timeline-date {
            color: var(--primary-yellow);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .pagination-history {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 30px;
        }
        
        .page-btn {
            background-color: #111;
            border: 1px solid #333;
            color: #ccc;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .page-btn:hover {
            border-color: var(--primary-yellow);
            color: var(--primary-yellow);
        }
        
        .page-btn.active {
            background-color: var(--primary-yellow);
            border-color: var(--primary-yellow);
            color: #000;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div th:replace="base :: header"></div>
    
    <main th:fragment="content">
        <!-- Hero -->
        <section class="history-hero">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1 class="display-5 fw-bold text-white mb-3">
                            <i class="bi bi-clock-history me-2 text-gold"></i>MI HISTORIAL
                        </h1>
                        <p class="lead text-white-50 mb-4">
                            Revisa tu actividad, compras y progreso en Atlas Fitness
                        </p>
                    </div>
                    <div class="col-md-4 text-md-end">
                        <button class="btn btn-outline-gold" onclick="exportHistory()">
                            <i class="bi bi-download me-2"></i> EXPORTAR HISTORIAL
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Estadísticas -->
        <section class="py-4">
            <div class="container">
                <div class="history-stats">
                    <div class="stat-card-history">
                        <div class="stat-number-history">$2,450</div>
                        <div class="stat-label-history">TOTAL GASTADO</div>
                    </div>
                    <div class="stat-card-history">
                        <div class="stat-number-history">48</div>
                        <div class="stat-label-history">COMPRAS REALIZADAS</div>
                    </div>
                    <div class="stat-card-history">
                        <div class="stat-number-history">156</div>
                        <div class="stat-label-history">DÍAS ENTRENADOS</div>
                    </div>
                    <div class="stat-card-history">
                        <div class="stat-number-history">92%</div>
                        <div class="stat-label-history">SATISFACCIÓN</div>
                    </div>
                </div>

                <!-- Filtros -->
                <div class="filters-bar">
                    <div class="row align-items-center">
                        <div class="col-md-4 mb-3 mb-md-0">
                            <h6 class="text-white mb-2">
                                <i class="bi bi-funnel me-2 text-gold"></i>FILTRAR POR
                            </h6>
                            <select class="form-select form-control-gym">
                                <option>Todos los tipos</option>
                                <option>Compras</option>
                                <option>Entrenamientos</option>
                                <option>Clases</option>
                                <option>Pagos de membresía</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3 mb-md-0">
                            <h6 class="text-white mb-2">
                                <i class="bi bi-calendar-range me-2 text-gold"></i>RANGO DE FECHAS
                            </h6>
                            <div class="date-range">
                                <input type="date" class="date-input" id="startDate">
                                <span class="text-white-50">a</span>
                                <input type="date" class="date-input" id="endDate">
                            </div>
                        </div>
                        <div class="col-md-4 text-md-end">
                            <button class="btn btn-gold me-2" onclick="applyFilters()">
                                <i class="bi bi-funnel-fill me-2"></i> APLICAR FILTROS
                            </button>
                            <button class="btn btn-outline-secondary" onclick="clearFilters()">
                                <i class="bi bi-x-circle me-2"></i> LIMPIAR
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Pestañas -->
                <div class="history-tabs">
                    <button class="history-tab active" onclick="showHistoryTab('all')">
                        <i class="bi bi-grid me-2"></i> Todo
                    </button>
                    <button class="history-tab" onclick="showHistoryTab('purchases')">
                        <i class="bi bi-cart me-2"></i> Compras
                    </button>
                    <button class="history-tab" onclick="showHistoryTab('workouts')">
                        <i class="bi bi-activity me-2"></i> Entrenamientos
                    </button>
                    <button class="history-tab" onclick="showHistoryTab('classes')">
                        <i class="bi bi-calendar-check me-2"></i> Clases
                    </button>
                    <button class="history-tab" onclick="showHistoryTab('payments')">
                        <i class="bi bi-credit-card me-2"></i> Pagos
                    </button>
                    <button class="history-tab" onclick="showHistoryTab('achievements')">
                        <i class="bi bi-trophy me-2"></i> Logros
                    </button>
                </div>

                <!-- Contenido de pestañas -->
                <div class="tab-content">
                    <!-- Todo -->
                    <div class="tab-pane active" id="history-all">
                        <!-- Vista de tabla -->
                        <div class="d-none d-md-block">
                            <div class="history-table">
                                <div class="table-header">
                                    <div>Fecha</div>
                                    <div>Tipo</div>
                                    <div>Descripción</div>
                                    <div>Monto</div>
                                    <div>Estado</div>
                                    <div>Acciones</div>
                                </div>
                                
                                <!-- Fila 1 -->
                                <div class="table-row">
                                    <div>
                                        <div class="text-white">15 Nov 2023</div>
                                        <div class="text-white-50 small">10:30 AM</div>
                                    </div>
                                    <div>
                                        <span class="badge bg-dark text-white">
                                            <i class="bi bi-cart me-1"></i> Compra
                                        </span>
                                    </div>
                                    <div class="text-white">
                                        Proteína Whey Atlas Pro (2x)
                                    </div>
                                    <div class="text-gold fw-bold">$79.98</div>
                                    <div>
                                        <span class="status-badge status-completed">Completado</span>
                                    </div>
                                    <div>
                                        <button class="btn btn-outline-gold btn-sm" onclick="viewDetails(1)">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Fila 2 -->
                                <div class="table-row">
                                    <div>
                                        <div class="text-white">14 Nov 2023</div>
                                        <div class="text-white-50 small">7:00 AM</div>
                                    </div>
                                    <div>
                                        <span class="badge bg-info">
                                            <i class="bi bi-activity me-1"></i> Entrenamiento
                                        </span>
                                    </div>
                                    <div class="text-white">
                                        Fuerza Superior - Día A
                                    </div>
                                    <div class="text-white-50">-</div>
                                    <div>
                                        <span class="status-badge status-completed">Completado</span>
                                    </div>
                                    <div>
                                        <button class="btn btn-outline-gold btn-sm" onclick="viewDetails(2)">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Fila 3 -->
                                <div class="table-row">
                                    <div>
                                        <div class="text-white">13 Nov 2023</div>
                                        <div class="text-white-50 small">6:00 PM</div>
                                    </div>
                                    <div>
                                        <span class="badge bg-warning text-dark">
                                            <i class="bi bi-calendar-check me-1"></i> Clase
                                        </span>
                                    </div>
                                    <div class="text-white">
                                        Yoga Restaurativo
                                    </div>
                                    <div class="text-white-50">-</div>
                                    <div>
                                        <span class="status-badge status-completed">Asistió</span>
                                    </div>
                                    <div>
                                        <button class="btn btn-outline-gold btn-sm" onclick="viewDetails(3)">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Fila 4 -->
                                <div class="table-row">
                                    <div>
                                        <div class="text-white">10 Nov 2023</div>
                                        <div class="text-white-50 small">9:15 AM</div>
                                    </div>
                                    <div>
                                        <span class="badge bg-success">
                                            <i class="bi bi-credit-card me-1"></i> Pago
                                        </span>
                                    </div>
                                    <div class="text-white">
                                        Membresía Pro - Noviembre
                                    </div>
                                    <div class="text-gold fw-bold">$49.99</div>
                                    <div>
                                        <span class="status-badge status-completed">Pagado</span>
                                    </div>
                                    <div>
                                        <button class="btn btn-outline-gold btn-sm" onclick="viewDetails(4)">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Fila 5 -->
                                <div class="table-row">
                                    <div>
                                        <div class="text-white">8 Nov 2023</div>
                                        <div class="text-white-50 small">2:00 PM</div>
                                    </div>
                                    <div>
                                        <span class="badge bg-secondary">
                                            <i class="bi bi-trophy me-1"></i> Logro
                                        </span>
                                    </div>
                                    <div class="text-white">
                                        30 días consecutivos entrenando
                                    </div>
                                    <div class="text-white-50">-</div>
                                    <div>
                                        <span class="status-badge status-completed">Obtenido</span>
                                    </div>
                                    <div>
                                        <button class="btn btn-outline-gold btn-sm" onclick="viewDetails(5)">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Vista móvil -->
                        <div class="d-block d-md-none">
                            <!-- Tarjeta 1 -->
                            <div class="history-card">
                                <div class="history-date">
                                    <i class="bi bi-cart"></i> 15 Nov 2023 · 10:30 AM
                                </div>
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h6 class="text-white mb-1">Compra - Proteína Whey Atlas Pro</h6>
                                        <p class="text-white-50 small mb-0">Cantidad: 2 · Total: $79.98</p>
                                    </div>
                                    <span class="status-badge status-completed">Completado</span>
                                </div>
                                <div class="text-end">
                                    <button class="btn btn-outline-gold btn-sm" onclick="viewDetails(1)">
                                        <i class="bi bi-eye me-1"></i> Ver detalles
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Tarjeta 2 -->
                            <div class="history-card">
                                <div class="history-date">
                                    <i class="bi bi-activity"></i> 14 Nov 2023 · 7:00 AM
                                </div>
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h6 class="text-white mb-1">Entrenamiento - Fuerza Superior</h6>
                                        <p class="text-white-50 small mb-0">Duración: 45 min · Calorías: 420</p>
                                    </div>
                                    <span class="status-badge status-completed">Completado</span>
                                </div>
                                <div class="text-end">
                                    <button class="btn btn-outline-gold btn-sm" onclick="viewDetails(2)">
                                        <i class="bi bi-eye me-1"></i> Ver detalles
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Paginación -->
                        <div class="pagination-history">
                            <button class="page-btn">
                                <i class="bi bi-chevron-left"></i>
                            </button>
                            <button class="page-btn active">1</button>
                            <button class="page-btn">2</button>
                            <button class="page-btn">3</button>
                            <button class="page-btn">4</button>
                            <button class="page-btn">5</button>
                            <button class="page-btn">
                                <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Otras pestañas (ocultas por defecto) -->
                    <div class="tab-pane" id="history-purchases" style="display: none;">
                        <div class="empty-history">
                            <i class="bi bi-cart empty-icon"></i>
                            <h4 class="text-white mb-3">No hay compras recientes</h4>
                            <p class="text-white-50 mb-4">
                                Aún no has realizado ninguna compra en nuestra tienda.
                            </p>
                            <a th:href="@{/productos/catalogo}" class="btn btn-gold">
                                <i class="bi bi-shop me-2"></i> IR A LA TIENDA
                            </a>
                        </div>
                    </div>
                    
                    <div class="tab-pane" id="history-workouts" style="display: none;">
                        <!-- Contenido de entrenamientos -->
                    </div>
                    
                    <div class="tab-pane" id="history-classes" style="display: none;">
                        <!-- Contenido de clases -->
                    </div>
                    
                    <div class="tab-pane" id="history-payments" style="display: none;">
                        <!-- Contenido de pagos -->
                    </div>
                    
                    <div class="tab-pane" id="history-achievements" style="display: none;">
                        <!-- Contenido de logros -->
                    </div>
                </div>

                <!-- Gráficos y análisis -->
                <div class="row mt-5">
                    <div class="col-lg-8">
                        <div class="chart-container">
                            <h5 class="text-white mb-4">
                                <i class="bi bi-graph-up me-2 text-gold"></i>ACTIVIDAD MENSUAL
                            </h5>
                            <canvas id="activityChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="chart-container">
                            <h5 class="text-white mb-4">
                                <i class="bi bi-pie-chart me-2 text-gold"></i>DISTRIBUCIÓN
                            </h5>
                            <canvas id="distributionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Línea de tiempo -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card card-gym p-4">
                            <h5 class="text-white mb-4">
                                <i class="bi bi-clock-history me-2 text-gold"></i>LÍNEA DE TIEMPO RECIENTE
                            </h5>
                            
                            <div class="timeline">
                                <!-- Item 1 -->
                                <div class="timeline-item">
                                    <div class="timeline-dot"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-date">Hoy, 10:30 AM</div>
                                        <h6 class="text-white mb-2">Compra completada</h6>
                                        <p class="text-white-50 mb-0">Proteína Whey Atlas Pro · $79.98</p>
                                    </div>
                                </div>
                                
                                <!-- Item 2 -->
                                <div class="timeline-item">
                                    <div class="timeline-dot"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-date">Ayer, 7:00 AM</div>
                                        <h6 class="text-white mb-2">Entrenamiento completado</h6>
                                        <p class="text-white-50 mb-0">Fuerza Superior · 45 minutos · 420 calorías</p>
                                    </div>
                                </div>
                                
                                <!-- Item 3 -->
                                <div class="timeline-item">
                                    <div class="timeline-dot"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-date">13 Nov, 6:00 PM</div>
                                        <h6 class="text-white mb-2">Clase asistida</h6>
                                        <p class="text-white-50 mb-0">Yoga Restaurativo · Instructor: Ana</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <div th:replace="base :: footer"></div>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // Variables globales
        let activityChart, distributionChart;
        let currentTab = 'all';
        
        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar fechas por defecto
            const today = new Date();
            const lastMonth = new Date();
            lastMonth.setMonth(lastMonth.getMonth() - 1);
            
            document.getElementById('startDate').value = formatDate(lastMonth);
            document.getElementById('endDate').value = formatDate(today);
            
            // Inicializar gráficos
            initCharts();
            
            // Configurar eventos
            setupEventListeners();
        });
        
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        function setupEventListeners() {
            // Eventos de filtros
            document.getElementById('startDate').addEventListener('change', function() {
                validateDateRange();
            });
            
            document.getElementById('endDate').addEventListener('change', function() {
                validateDateRange();
            });
        }
        
        function validateDateRange() {
            const startDate = new Date(document.getElementById('startDate').value);
            const endDate = new Date(document.getElementById('endDate').value);
            
            if (startDate > endDate) {
                alert('La fecha de inicio no puede ser mayor a la fecha de fin');
                document.getElementById('startDate').value = formatDate(endDate);
            }
        }
        
        // Funciones de pestañas
        function showHistoryTab(tabId) {
            // Ocultar todas las pestañas
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.style.display = 'none';
            });
            
            // Remover clase active de todas las pestañas
            document.querySelectorAll('.history-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar pestaña seleccionada
            document.getElementById(`history-${tabId}`).style.display = 'block';
            
            // Añadir clase active a la pestaña seleccionada
            event.target.classList.add('active');
            
            // Actualizar gráficos según la pestaña
            currentTab = tabId;
            updateCharts();
        }
        
        // Funciones de filtros
        function applyFilters() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const typeFilter = document.querySelector('.form-select').value;
            
            // Aquí iría la lógica para aplicar filtros y recargar datos
            console.log('Aplicando filtros:', { startDate, endDate, typeFilter });
            
            showNotification('Filtros aplicados correctamente', 'success');
            updateCharts();
        }
        
        function clearFilters() {
            // Restablecer fechas
            const today = new Date();
            const lastMonth = new Date();
            lastMonth.setMonth(lastMonth.getMonth() - 1);
            
            document.getElementById('startDate').value = formatDate(lastMonth);
            document.getElementById('endDate').value = formatDate(today);
            
            // Restablecer select
            document.querySelector('.form-select').selectedIndex = 0;
            
            // Recargar datos
            applyFilters();
        }
        
        // Funciones de gráficos
        function initCharts() {
            const ctx1 = document.getElementById('activityChart').getContext('2d');
            const ctx2 = document.getElementById('distributionChart').getContext('2d');
            
            // Gráfico de actividad
            activityChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['Oct 23', 'Oct 30', 'Nov 6', 'Nov 13', 'Nov 20', 'Nov 27'],
                    datasets: [{
                        label: 'Entrenamientos',
                        data: [12, 15, 10, 18, 16, 20],
                        borderColor: '#FFD700',
                        backgroundColor: 'rgba(255, 215, 0, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#fff'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: '#333'
                            },
                            ticks: {
                                color: '#ccc'
                            }
                        },
                        y: {
                            grid: {
                                color: '#333'
                            },
                            ticks: {
                                color: '#ccc'
                            }
                        }
                    }
                }
            });
            
            // Gráfico de distribución
            distributionChart = new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: ['Entrenamientos', 'Compras', 'Clases', 'Pagos'],
                    datasets: [{
                        data: [45, 30, 15, 10],
                        backgroundColor: [
                            '#FFD700',
                            '#28a745',
                            '#007bff',
                            '#dc3545'
                        ],
                        borderWidth: 2,
                        borderColor: '#000'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#fff',
                                padding: 20
                            }
                        }
                    }
                }
            });
        }
        
        function updateCharts() {
            // Aquí actualizaríamos los datos de los gráficos según el tab actual
            console.log('Actualizando gráficos para:', currentTab);
        }
        
        // Funciones de acciones
        function viewDetails(itemId) {
            // Aquí mostraríamos un modal con los detalles del item
            alert(`Mostrando detalles del item ${itemId} - En una implementación real, esto abriría un modal`);
        }
        
        function exportHistory() {
            // Aquí se generaría y descargaría un archivo con el historial
            showNotification('Generando archivo de exportación...', 'info');
            
            setTimeout(() => {
                showNotification('Historial exportado correctamente', 'success');
                // En una implementación real, aquí se descargaría el archivo
            }, 1500);
        }
        
        // Mostrar notificación
        function showNotification(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed top-0 end-0 m-3`;
            alertDiv.style.zIndex = '1050';
            alertDiv.innerHTML = `
                <i class="bi ${type === 'success' ? 'bi-check-circle-fill' : 'bi-info-circle-fill'} me-2"></i>
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 3000);
        }
    </script>
</body>
</html>